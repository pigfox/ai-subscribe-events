<!DOCTYPE html>
<html>
<head>
    <title>Counter DApp</title>
    <script src="https://cdn.jsdelivr.net/npm/web3@1.3.0/dist/web3.min.js"></script>
</head>
<body>
<h1>Counter DApp</h1>
<button id="incrementBtn">Increment Count</button>
<p>Count: <span id="count">0</span></p>

<script>
    // Assuming MetaMask is installed and the user is connected to the correct network
    window.addEventListener('load', async () => {
        // Enable Web3
        if (window.ethereum) {
            window.web3 = new Web3(window.ethereum);
            await window.ethereum.enable();
        } else {
            console.error("Please install MetaMask to use this DApp!");
            return;
        }

        const contractAddress = "YOUR_CONTRACT_ADDRESS_HERE"; // Replace with your contract's address
        const abi = [ /* ABI generated by the Solidity compiler */ ]; // Replace with your contract's ABI

        const contract = new web3.eth.Contract(abi, contractAddress);
        const incrementBtn = document.getElementById('incrementBtn');
        const countSpan = document.getElementById('count');

        // Function to call the incrementCount function in your contract
        incrementBtn.addEventListener('click', async () => {
            const accounts = await web3.eth.getAccounts();
            contract.methods.incrementCount().send({ from: accounts[0] })
                .catch(err => console.error(err));
        });

        // Subscribe to the CountIncremented event
        contract.events.CountIncremented()
            .on('data', function(event) {
                console.log('CountIncremented event fired', event);
                countSpan.innerText = event.returnValues.newCount;
            })
            .on('error', console.error);
    });
</script>
</body>
</html>